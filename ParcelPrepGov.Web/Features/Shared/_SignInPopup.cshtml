@inject Microsoft.Extensions.Options.IOptions<SingleSignOnOptions> singleSignInOptions
@{ 
    var enableSingleSignIn = singleSignInOptions.Value.EnableSingleSignOn;
}

@(Html.DevExtreme().Popup()
        .ID("signInPopup")
        .Title("Sign in")
        .Visible(false)
        .ShowCloseButton(false)
        .Width(450)
        .Height(325)
        .Content(@<text>
                    @using (Html.BeginForm( "AjaxSignIn", "Account", FormMethod.Post, new { @id = "signInPopupForm" }))
                    {
                        @*@Html.AntiForgeryToken()*@
                        @(Html.DevExtreme()
                            .Form<SignInRequest>()
                                .ID("signin-popup-form")
                                .ColCount(1)
                                .Items(items =>
                                {
                                    items.AddSimpleFor(m => m.Username)
                                        .Editor(e => e
                                            .TextBox()
                                            .ID("username")
                                        ).IsRequired(false);

                                    items.AddSimpleFor(m => m.Password)
                                        .Editor(e => e
                                            .TextBox()
                                            .Mode(TextBoxMode.Password)
                                        ).IsRequired(false);

                                    items.AddGroup().Items(innerGroupItems =>
                                    {
                                        if (enableSingleSignIn)
                                        {
                                            innerGroupItems.AddButton()
                                                .HorizontalAlignment(HorizontalAlignment.Left)
                                                .ButtonOptions(b =>
                                                    b.Text("Sign in with FedEx")
                                                    .Type(ButtonType.Normal)
                                                    .ID("btnSignInWithFedexExpiration")
                                                    .OnClick("PPG.logoutWarning.signInWithFedexButton_onClick")
                                                    .UseSubmitBehavior(false)
                                                );
                                        }

                                        innerGroupItems.AddButton()
                                            .HorizontalAlignment(HorizontalAlignment.Right)
                                            .ButtonOptions(b =>
                                                b.Text("Sign in")
                                                .Type(ButtonType.Default)
                                                .ID("btnSignInExpiration")
                                                .OnClick("PPG.logoutWarning.signInButton_onClick")
                                                .UseSubmitBehavior(false)
                                            );
                                    }).ColCount(enableSingleSignIn ? 2 : 1);

                                }))
                    }
                 </text>
    )
)
